# Assignment Distribution Workflow - Visual Diagrams

## Complete End-to-End Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TEACHER ASSIGNMENT WORKFLOW                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Teacher Opens   â”‚
â”‚ Teacher Dashboardâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: AUTHENTICATION                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Login Modal                               â”‚              â”‚
â”‚  â”‚ - Email: teacher@aicentner.com           â”‚              â”‚
â”‚  â”‚ - Password: ********                     â”‚              â”‚
â”‚  â”‚ - Click "Sign In"                        â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  Result: âœ… Auth modal closes, calendar appears            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: NAVIGATE TO LESSON                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Calendar Grid                             â”‚              â”‚
â”‚  â”‚ - Select: October 2025                   â”‚              â”‚
â”‚  â”‚ - Click: October 6, 2025 cell            â”‚              â”‚
â”‚  â”‚ - Lesson: Period 3 - 7th Civics         â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  Result: âœ… Enhancement panel slides in from right         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3: GENERATE QUIZ (Optional)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Enhancement Panel > Quiz Section         â”‚              â”‚
â”‚  â”‚ - Click "Generate Quiz with AI"          â”‚              â”‚
â”‚  â”‚ - AI Loading... (10-20s)                 â”‚              â”‚
â”‚  â”‚ - Quiz questions appear                  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  API Call:                                                   â”‚
â”‚  POST /.netlify/functions/generate-assessment               â”‚
â”‚  Body: { lesson: {...}, assessmentType: 'quiz-questions' } â”‚
â”‚                                                              â”‚
â”‚  Result: âœ… Quiz stored in lessonEnhancements object       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 4: OPEN ASSIGNMENT MODAL                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Enhancement Panel                         â”‚              â”‚
â”‚  â”‚ - Click "Assign to Students" button      â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  JavaScript Function: openAssignModal()                     â”‚
â”‚  - Loads enrolled students for period                       â”‚
â”‚  - Pre-fills lesson info                                    â”‚
â”‚  - Shows quiz preview if available                          â”‚
â”‚                                                              â”‚
â”‚  Result: âœ… Modal overlays screen with form                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 5: FILL ASSIGNMENT FORM                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Assignment Modal Form                     â”‚              â”‚
â”‚  â”‚                                           â”‚              â”‚
â”‚  â”‚ [â—] Quiz  [ ] Homework  [ ] Reading      â”‚              â”‚
â”‚  â”‚ [ ] Video [ ] Activity                   â”‚              â”‚
â”‚  â”‚                                           â”‚              â”‚
â”‚  â”‚ Title: [Constitution Quiz            ]   â”‚              â”‚
â”‚  â”‚                                           â”‚              â”‚
â”‚  â”‚ Instructions:                             â”‚              â”‚
â”‚  â”‚ [Complete all questions. 30 min limit.]  â”‚              â”‚
â”‚  â”‚                                           â”‚              â”‚
â”‚  â”‚ Due Date: [2025-10-25] Time: [23:59]     â”‚              â”‚
â”‚  â”‚ Points: [100]                             â”‚              â”‚
â”‚  â”‚                                           â”‚              â”‚
â”‚  â”‚ â˜‘ Select All Students (15 selected)      â”‚              â”‚
â”‚  â”‚ â˜‘ Alice Anderson                          â”‚              â”‚
â”‚  â”‚ â˜‘ Bob Brown                               â”‚              â”‚
â”‚  â”‚ â˜‘ Carol Chen                              â”‚              â”‚
â”‚  â”‚ ... (12 more students)                    â”‚              â”‚
â”‚  â”‚                                           â”‚              â”‚
â”‚  â”‚ [Cancel] [ğŸ“¤ Assign to Students]         â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 6: SUBMIT ASSIGNMENT                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Validation:                               â”‚              â”‚
â”‚  â”‚ âœ… Assignment type selected               â”‚              â”‚
â”‚  â”‚ âœ… Title filled                           â”‚              â”‚
â”‚  â”‚ âœ… Due date set                           â”‚              â”‚
â”‚  â”‚ âœ… At least one student selected          â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  JavaScript Function: submitAssignment()                    â”‚
â”‚  - Builds payload                                           â”‚
â”‚  - Gets auth token                                          â”‚
â”‚  - Calls API                                                â”‚
â”‚                                                              â”‚
â”‚  API Call:                                                   â”‚
â”‚  POST /.netlify/functions/assign-to-students                â”‚
â”‚  Headers: { Authorization: Bearer <token> }                 â”‚
â”‚  Body: {                                                     â”‚
â”‚    lesson_key: "2025-10-06_7th_civics_3",                  â”‚
â”‚    assignment_type: "quiz",                                 â”‚
â”‚    title: "Constitution Quiz",                              â”‚
â”‚    instructions: "Complete all questions...",               â”‚
â”‚    due_date: "2025-10-25T23:59:00Z",                       â”‚
â”‚    points_possible: 100,                                    â”‚
â”‚    student_ids: ["uuid1", "uuid2", ...],                   â”‚
â”‚    quiz_data: "{\"questions\": [...]}"                     â”‚
â”‚  }                                                           â”‚
â”‚                                                              â”‚
â”‚  Result: âœ… Loading spinner shows "Assigning to 15 students"â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 7: BACKEND PROCESSING                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ assign-to-students.js                     â”‚              â”‚
â”‚  â”‚                                           â”‚              â”‚
â”‚  â”‚ 1. âœ… Verify Bearer token                 â”‚              â”‚
â”‚  â”‚ 2. âœ… Check user role (teacher/admin)     â”‚              â”‚
â”‚  â”‚ 3. âœ… Validate input fields                â”‚              â”‚
â”‚  â”‚ 4. âœ… Verify student IDs exist             â”‚              â”‚
â”‚  â”‚ 5. âœ… Verify all users are students        â”‚              â”‚
â”‚  â”‚ 6. âœ… Extract subject_key from lesson_key  â”‚              â”‚
â”‚  â”‚ 7. âœ… Build metadata object                â”‚              â”‚
â”‚  â”‚ 8. âœ… Bulk insert to database              â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  Database Operation:                                         â”‚
â”‚  INSERT INTO student_assignments (                          â”‚
â”‚    teacher_id, student_id, lesson_key, subject_key,        â”‚
â”‚    assignment_type, title, instructions, due_date,          â”‚
â”‚    points_possible, status, metadata                        â”‚
â”‚  ) VALUES                                                    â”‚
â”‚    (teacher_uuid, student1_uuid, '2025-10-06_7th_civics_3',â”‚
â”‚     '7th_civics', 'quiz', 'Constitution Quiz', ..., 100,   â”‚
â”‚     'assigned', {...}),                                     â”‚
â”‚    (teacher_uuid, student2_uuid, ...),                      â”‚
â”‚    ... (13 more rows)                                       â”‚
â”‚                                                              â”‚
â”‚  Result: âœ… 15 records inserted                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 8: SUCCESS RESPONSE                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ API Response (200 OK):                    â”‚              â”‚
â”‚  â”‚ {                                         â”‚              â”‚
â”‚  â”‚   "success": true,                        â”‚              â”‚
â”‚  â”‚   "message": "Successfully created 15...",â”‚              â”‚
â”‚  â”‚   "assignments_created": 15,              â”‚              â”‚
â”‚  â”‚   "assignment_ids": [...],                â”‚              â”‚
â”‚  â”‚   "students": [                           â”‚              â”‚
â”‚  â”‚     {                                     â”‚              â”‚
â”‚  â”‚       "assignment_id": "...",             â”‚              â”‚
â”‚  â”‚       "student_name": "Alice Anderson",   â”‚              â”‚
â”‚  â”‚       "student_email": "alice@...",       â”‚              â”‚
â”‚  â”‚       "title": "Constitution Quiz",       â”‚              â”‚
â”‚  â”‚       "type": "quiz",                     â”‚              â”‚
â”‚  â”‚       "due_date": "2025-10-25T23:59:00Z", â”‚              â”‚
â”‚  â”‚       "status": "assigned"                â”‚              â”‚
â”‚  â”‚     },                                    â”‚              â”‚
â”‚  â”‚     ... (14 more students)                â”‚              â”‚
â”‚  â”‚   ]                                       â”‚              â”‚
â”‚  â”‚ }                                         â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  Frontend Display:                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚        âœ…                                 â”‚              â”‚
â”‚  â”‚   Assignment Created!                     â”‚              â”‚
â”‚  â”‚ Successfully assigned to 15 students      â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  Result: âœ… Success message auto-dismisses, modal closes    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 9: STUDENT DASHBOARD                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Student logs in                           â”‚              â”‚
â”‚  â”‚ - Clicks "My Assignments"                â”‚              â”‚
â”‚  â”‚ - Tab: "Upcoming"                        â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  API Call:                                                   â”‚
â”‚  GET /.netlify/functions/get-student-assignments            â”‚
â”‚    ?student_id=alice_uuid                                   â”‚
â”‚                                                              â”‚
â”‚  Database Query:                                             â”‚
â”‚  SELECT * FROM student_assignments                          â”‚
â”‚  WHERE student_id = 'alice_uuid'                            â”‚
â”‚    AND status IN ('assigned', 'submitted')                  â”‚
â”‚    AND due_date >= NOW()                                    â”‚
â”‚  ORDER BY due_date ASC                                      â”‚
â”‚                                                              â”‚
â”‚  API Response:                                               â”‚
â”‚  {                                                           â”‚
â”‚    "success": true,                                         â”‚
â”‚    "assignments": [                                         â”‚
â”‚      {                                                       â”‚
â”‚        "id": "...",                                         â”‚
â”‚        "title": "Constitution Quiz",                        â”‚
â”‚        "type": "quiz",                                      â”‚
â”‚        "due_date": "2025-10-25T23:59:00Z",                 â”‚
â”‚        "status": "assigned",                                â”‚
â”‚        "points_possible": 100,                              â”‚
â”‚        "subject_key": "7th_civics",                         â”‚
â”‚        "is_late": false,                                    â”‚
â”‚        "days_until_due": 5,                                 â”‚
â”‚        "hours_until_due": 13                                â”‚
â”‚      }                                                       â”‚
â”‚    ]                                                         â”‚
â”‚  }                                                           â”‚
â”‚                                                              â”‚
â”‚  Student Dashboard Display:                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ ğŸ“š My Assignments                         â”‚              â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚
â”‚  â”‚ â”‚ [Upcoming] [Overdue] [Submitted]   â”‚   â”‚              â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚
â”‚  â”‚                                           â”‚              â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚
â”‚  â”‚ â”‚ ğŸ“ Constitution Quiz                â”‚   â”‚              â”‚
â”‚  â”‚ â”‚ Civics â€¢ Due in 5 days              â”‚   â”‚              â”‚
â”‚  â”‚ â”‚ 100 points                          â”‚   â”‚              â”‚
â”‚  â”‚ â”‚ [View Quiz â†’]                       â”‚   â”‚              â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  Result: âœ… Student sees assignment immediately             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATA FLOW                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Teacher Browser                     Backend API                    Database
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Teacher UI  â”‚
â”‚             â”‚
â”‚ Form Data:  â”‚
â”‚ - Type      â”‚
â”‚ - Title     â”‚
â”‚ - Students  â”‚
â”‚ - Due Date  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ POST /assign-to-students
       â”‚ Bearer: <auth_token>
       â”‚ Body: { lesson_key, title, student_ids, ... }
       â”‚
       â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Netlify Edge   â”‚
   â”‚ Function       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ 1. Verify JWT token
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Supabase Auth      â”‚â”€â”€â”€â”€â”€â”€ getUser(token)
   â”‚                    â”‚â—„â”€â”€â”€â”€â”€â”€ User object
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ 2. Check user role
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ user_profiles      â”‚â”€â”€â”€â”€â”€â”€ SELECT role WHERE id=teacher_id
   â”‚ Table              â”‚â—„â”€â”€â”€â”€â”€â”€ role='teacher'
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ 3. Validate student IDs
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ user_profiles      â”‚â”€â”€â”€â”€â”€â”€ SELECT * WHERE id IN (student_ids)
   â”‚ Table              â”‚â—„â”€â”€â”€â”€â”€â”€ 15 student records
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ 4. Build insert payload
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ student_assignmentsâ”‚â”€â”€â”€â”€â”€â”€ INSERT 15 rows
   â”‚ Table              â”‚
   â”‚                    â”‚       Each row:
   â”‚ Row 1:             â”‚       - teacher_id
   â”‚ Row 2:             â”‚       - student_id
   â”‚ Row 3:             â”‚       - lesson_key
   â”‚ ...                â”‚       - assignment_type
   â”‚ Row 15:            â”‚       - title, due_date, etc.
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ 5. Return assignment IDs
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Response:      â”‚
   â”‚ {              â”‚
   â”‚   success: trueâ”‚
   â”‚   ids: [...]   â”‚
   â”‚ }              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Teacher UI      â”‚
â”‚ Success message â”‚
â”‚ Modal closes    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Student Browser
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Student UI  â”‚
â”‚             â”‚
â”‚ Loads       â”‚
â”‚ My Assign-  â”‚
â”‚ ments       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ GET /get-student-assignments?student_id=alice_uuid
       â”‚
       â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Netlify Edge   â”‚
   â”‚ Function       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ Query assignments
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ student_assignmentsâ”‚â”€â”€â”€â”€â”€â”€ SELECT * WHERE student_id='alice_uuid'
   â”‚ Table (RLS)        â”‚       AND status IN ('assigned', 'submitted')
   â”‚                    â”‚       AND due_date >= NOW()
   â”‚                    â”‚â—„â”€â”€â”€â”€â”€â”€ 1 assignment record
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ Format response
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Response:      â”‚
   â”‚ {              â”‚
   â”‚   assignments: â”‚
   â”‚   [{ quiz }]   â”‚
   â”‚ }              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Student UI      â”‚
â”‚ Display quiz    â”‚
â”‚ card            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Database Schema Visual

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  student_assignments TABLE                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  Primary Key:                                                 â”‚
â”‚  â”œâ”€ id                UUID (auto-generated)                   â”‚
â”‚                                                               â”‚
â”‚  Foreign Keys:                                                â”‚
â”‚  â”œâ”€ teacher_id        UUID â†’ auth.users(id)                  â”‚
â”‚  â”œâ”€ student_id        UUID â†’ auth.users(id)                  â”‚
â”‚                                                               â”‚
â”‚  Lesson Identification:                                       â”‚
â”‚  â”œâ”€ lesson_key        TEXT (2025-10-06_7th_civics_3)         â”‚
â”‚  â”œâ”€ subject_key       TEXT (7th_civics) [auto-extracted]     â”‚
â”‚                                                               â”‚
â”‚  Assignment Details:                                          â”‚
â”‚  â”œâ”€ assignment_type   ENUM (quiz|homework|reading|...)       â”‚
â”‚  â”œâ”€ title             TEXT (Constitution Quiz)               â”‚
â”‚  â”œâ”€ description       TEXT (optional)                         â”‚
â”‚  â”œâ”€ instructions      TEXT (Complete all questions...)        â”‚
â”‚                                                               â”‚
â”‚  Scheduling:                                                  â”‚
â”‚  â”œâ”€ assigned_date     TIMESTAMPTZ (NOW())                    â”‚
â”‚  â”œâ”€ due_date          TIMESTAMPTZ (2025-10-25T23:59:00Z)     â”‚
â”‚                                                               â”‚
â”‚  Grading:                                                     â”‚
â”‚  â”œâ”€ points_possible   INTEGER (100)                           â”‚
â”‚  â”œâ”€ points_earned     DECIMAL(5,2) (nullable)                â”‚
â”‚                                                               â”‚
â”‚  Status:                                                      â”‚
â”‚  â”œâ”€ status            ENUM (assigned|submitted|graded|overdue)â”‚
â”‚                                                               â”‚
â”‚  Submission:                                                  â”‚
â”‚  â”œâ”€ submission_text   TEXT (nullable)                         â”‚
â”‚  â”œâ”€ submission_urls   TEXT[] (nullable)                       â”‚
â”‚  â”œâ”€ submitted_at      TIMESTAMPTZ (nullable)                 â”‚
â”‚                                                               â”‚
â”‚  Grading:                                                     â”‚
â”‚  â”œâ”€ feedback          TEXT (nullable)                         â”‚
â”‚  â”œâ”€ rubric_scores     JSONB (nullable)                        â”‚
â”‚  â”œâ”€ graded_at         TIMESTAMPTZ (nullable)                 â”‚
â”‚                                                               â”‚
â”‚  Metadata:                                                    â”‚
â”‚  â”œâ”€ metadata          JSONB (quiz_data, lesson_code, etc.)   â”‚
â”‚  â”œâ”€ created_at        TIMESTAMPTZ (NOW())                    â”‚
â”‚  â”œâ”€ updated_at        TIMESTAMPTZ (NOW())                    â”‚
â”‚                                                               â”‚
â”‚  Unique Constraint:                                           â”‚
â”‚  â””â”€ UNIQUE (student_id, lesson_key, assignment_type, title)  â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            Indexes
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”œâ”€ idx_student_assignments_student (student_id)              â”‚
â”‚ â”œâ”€ idx_student_assignments_teacher (teacher_id)              â”‚
â”‚ â”œâ”€ idx_student_assignments_lesson (lesson_key)               â”‚
â”‚ â”œâ”€ idx_student_assignments_status (status)                   â”‚
â”‚ â”œâ”€ idx_student_assignments_student_status (student_id,status)â”‚
â”‚ â””â”€ idx_student_assignments_student_due (student_id,due_date) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                         Triggers
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”œâ”€ auto_populate_subject_key() - Extracts from lesson_key    â”‚
â”‚ â”œâ”€ auto_update_assignment_status() - Updates on submit/grade â”‚
â”‚ â”œâ”€ notify_new_assignment() - Creates notification            â”‚
â”‚ â””â”€ update_updated_at_column() - Updates timestamp            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                      RLS Policies
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Students:                                                     â”‚
â”‚ â”œâ”€ SELECT: student_id = auth.uid()                           â”‚
â”‚ â””â”€ UPDATE: student_id = auth.uid() (submission fields only)  â”‚
â”‚                                                               â”‚
â”‚ Teachers:                                                     â”‚
â”‚ â”œâ”€ SELECT: teacher_id = auth.uid() OR role='admin'           â”‚
â”‚ â”œâ”€ INSERT: teacher_id = auth.uid() OR role='admin'           â”‚
â”‚ â”œâ”€ UPDATE: teacher_id = auth.uid() OR role='admin'           â”‚
â”‚ â””â”€ DELETE: teacher_id = auth.uid() OR role='admin'           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Error Handling Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ERROR SCENARIOS                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Frontend Validation Errors:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

User Action           Validation Check          Response
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€

Click Submit    â†’     Assignment type?    â†’     âŒ Alert: "Select type"
                      âœ… Selected

Click Submit    â†’     Title filled?       â†’     âŒ Alert: "Enter title"
                      âœ… Filled

Click Submit    â†’     Due date set?       â†’     âŒ Alert: "Select due date"
                      âœ… Set

Click Submit    â†’     Students selected?  â†’     âŒ Alert: "Select students"
                      âœ… â‰¥ 1 selected
                            â”‚
                            â–¼
                      Submit to API


Backend API Errors:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Request               Validation                Response
â”€â”€â”€â”€â”€â”€â”€               â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€â”€

POST /assign     â†’    Auth token valid?    â†’   401 Unauthorized
                      âœ… Valid token
                            â”‚
                            â–¼
                      User role?           â†’   403 Forbidden (not teacher)
                      âœ… teacher/admin
                            â”‚
                            â–¼
                      lesson_key exists?   â†’   400 Bad Request
                      âœ… Exists
                            â”‚
                            â–¼
                      Valid assignment_type? â†’  400 Bad Request
                      âœ… Valid enum
                            â”‚
                            â–¼
                      Student IDs exist?   â†’   400 Bad Request
                      âœ… All exist          â†’   (missing_ids: [...])
                            â”‚
                            â–¼
                      All are students?    â†’   400 Bad Request
                      âœ… All students       â†’   (invalid_users: [...])
                            â”‚
                            â–¼
                      Duplicate assignment? â†’  409 Conflict
                      âœ… Unique
                            â”‚
                            â–¼
                      Database insert      â†’   500 Server Error
                      âœ… Success
                            â”‚
                            â–¼
                      200 OK
                      { success: true, ... }
```

---

**Diagrams Version**: 1.0
**Last Updated**: 2025-10-20
**Maintained By**: QA Team
